{"openapi":"3.1.0","info":{"title":"Licorera API","version":"1.0"},"paths":{"/auth/login":{"post":{"summary":"Login","description":"POST /auth/login\nbody: { \"username\": \"...\", \"password\": \"...\" }\nReturns: {\"ok\": True, \"token\": \"...\", \"staff\": {...}}","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Payload"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/logout":{"post":{"summary":"Logout","description":"POST /auth/logout  (expects Authorization: Bearer <token>)","operationId":"logout_auth_logout_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/settings":{"get":{"summary":"Get Settings","operationId":"get_settings_settings_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppSettings"}}}}}},"put":{"summary":"Put Settings","operationId":"put_settings_settings_put","parameters":[{"name":"x-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Api-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppSettingsUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AppSettings"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/products":{"get":{"summary":"List Products","operationId":"list_products_products_get","parameters":[{"name":"q","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Q"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProductOut"},"title":"Response List Products Products Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"summary":"Create Product","operationId":"create_product_products_post","parameters":[{"name":"x-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Api-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/products/{product_id}":{"put":{"summary":"Update Product","operationId":"update_product_products__product_id__put","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}},{"name":"x-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Api-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete Product","operationId":"delete_product_products__product_id__delete","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}},{"name":"x-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Api-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/inventory/adjust":{"post":{"summary":"Adjust Stock","operationId":"adjust_stock_inventory_adjust_post","parameters":[{"name":"x-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Api-Key"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdjustIn"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sales":{"post":{"summary":"Create Sale","operationId":"create_sale_sales_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SaleIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/stats/dashboard":{"get":{"summary":"Stats Dashboard","operationId":"stats_dashboard_stats_dashboard_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/license/activate":{"post":{"summary":"Api Activate License","operationId":"api_activate_license_api_license_activate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseIn"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/license/status":{"get":{"summary":"Api License Status","operationId":"api_license_status_api_license_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/license/reset":{"post":{"summary":"Api Reset License","operationId":"api_reset_license_api_license_reset_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AdjustIn":{"properties":{"product_id":{"type":"integer","title":"Product Id"},"qty":{"type":"integer","title":"Qty","description":"positivo aumenta, negativo disminuye"},"note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Note"}},"type":"object","required":["product_id","qty"],"title":"AdjustIn"},"AlertsSettings":{"properties":{"stock_low":{"type":"boolean","title":"Stock Low","default":true},"daily_summary":{"type":"boolean","title":"Daily Summary","default":false},"summary_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary Email"}},"type":"object","title":"AlertsSettings"},"AppSettings":{"properties":{"business":{"$ref":"#/components/schemas/BusinessSettings","default":{"name":"LA LICORERA Drink Ice","receipt_header":"LA LICORERA Drink Ice","receipt_footer":"┬íGracias por su compra!"}},"taxes":{"$ref":"#/components/schemas/TaxSettings","default":{"vat_percent":19.0,"prices_include_vat":false,"round_to":0}},"inventory":{"$ref":"#/components/schemas/InventorySettings","default":{"low_stock_threshold":5,"allow_negative_stock":false,"default_cost_method":"unit"}},"pos":{"$ref":"#/components/schemas/POSSettings","default":{"payment_methods":["efectivo","transferencia"],"max_discount_pct":20,"require_discount_pin":true,"printer_width":48,"favorites":[]}},"alerts":{"$ref":"#/components/schemas/AlertsSettings","default":{"stock_low":true,"daily_summary":false}},"appearance":{"$ref":"#/components/schemas/AppearanceSettings","default":{"theme":"dark","density":"comfortable"}}},"type":"object","title":"AppSettings"},"AppSettingsUpdate":{"properties":{"business":{"anyOf":[{"$ref":"#/components/schemas/BusinessSettings"},{"type":"null"}]},"taxes":{"anyOf":[{"$ref":"#/components/schemas/TaxSettings"},{"type":"null"}]},"inventory":{"anyOf":[{"$ref":"#/components/schemas/InventorySettings"},{"type":"null"}]},"pos":{"anyOf":[{"$ref":"#/components/schemas/POSSettings"},{"type":"null"}]},"alerts":{"anyOf":[{"$ref":"#/components/schemas/AlertsSettings"},{"type":"null"}]},"appearance":{"anyOf":[{"$ref":"#/components/schemas/AppearanceSettings"},{"type":"null"}]}},"type":"object","title":"AppSettingsUpdate"},"AppearanceSettings":{"properties":{"theme":{"type":"string","enum":["dark","light"],"title":"Theme","default":"dark"},"density":{"type":"string","enum":["comfortable","compact"],"title":"Density","default":"comfortable"}},"type":"object","title":"AppearanceSettings"},"BusinessSettings":{"properties":{"name":{"type":"string","title":"Name","default":"LA LICORERA Drink Ice"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"nit":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nit"},"receipt_header":{"type":"string","title":"Receipt Header","default":"LA LICORERA Drink Ice"},"receipt_footer":{"type":"string","title":"Receipt Footer","default":"┬íGracias por su compra!"}},"type":"object","title":"BusinessSettings"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InventorySettings":{"properties":{"low_stock_threshold":{"type":"integer","title":"Low Stock Threshold","default":5},"allow_negative_stock":{"type":"boolean","title":"Allow Negative Stock","default":false},"default_cost_method":{"type":"string","const":"unit","title":"Default Cost Method","default":"unit"}},"type":"object","title":"InventorySettings"},"LicenseIn":{"properties":{"code":{"type":"string","title":"Code"}},"type":"object","required":["code"],"title":"LicenseIn"},"POSSettings":{"properties":{"payment_methods":{"items":{"type":"string"},"type":"array","title":"Payment Methods","default":["efectivo","transferencia"]},"max_discount_pct":{"type":"integer","title":"Max Discount Pct","default":20},"require_discount_pin":{"type":"boolean","title":"Require Discount Pin","default":true},"printer_width":{"type":"integer","title":"Printer Width","default":48},"favorites":{"items":{"type":"integer"},"type":"array","title":"Favorites","default":[]}},"type":"object","title":"POSSettings"},"ProductCreate":{"properties":{"name":{"type":"string","title":"Name"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"cost_per_unit":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cost Per Unit"},"stock":{"type":"integer","title":"Stock","default":0}},"type":"object","required":["name"],"title":"ProductCreate"},"ProductOut":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"cost_per_unit":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cost Per Unit"},"stock":{"type":"integer","title":"Stock"}},"type":"object","required":["id","name","stock"],"title":"ProductOut"},"ProductUpdate":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"cost_per_unit":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cost Per Unit"}},"type":"object","title":"ProductUpdate"},"SaleIn":{"properties":{"items":{"items":{"$ref":"#/components/schemas/SaleItemIn"},"type":"array","title":"Items"},"discount_pct":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Discount Pct"},"discount_abs":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Discount Abs"},"apply_tax":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Apply Tax"},"cash":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Cash"}},"type":"object","required":["items"],"title":"SaleIn"},"SaleItemIn":{"properties":{"product_id":{"type":"integer","title":"Product Id"},"qty":{"type":"integer","title":"Qty"}},"type":"object","required":["product_id","qty"],"title":"SaleItemIn"},"TaxSettings":{"properties":{"vat_percent":{"type":"number","title":"Vat Percent","default":19.0},"prices_include_vat":{"type":"boolean","title":"Prices Include Vat","default":false},"round_to":{"type":"integer","enum":[0,50,100],"title":"Round To","default":0}},"type":"object","title":"TaxSettings"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}
